# Generated by Django 3.2.15 on 2026-01-13 01:35

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import uuid


class Migration(migrations.Migration):

    dependencies = [
        ('projects', '0004_auto_20260113_0935'),
        ('models', '0003_set_default_executors'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('content', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='BackgroundMusic',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, verbose_name='音乐名称')),
                ('file_path', models.CharField(max_length=512, verbose_name='文件路径')),
                ('mood', models.CharField(choices=[('happy', '欢快'), ('sad', '悲伤'), ('tense', '紧张'), ('calm', '平静'), ('energetic', '激昂'), ('romantic', '浪漫'), ('mysterious', '神秘'), ('epic', '史诗')], db_index=True, max_length=20, verbose_name='情绪')),
                ('duration', models.IntegerField(verbose_name='时长(秒)')),
                ('bpm', models.IntegerField(blank=True, null=True, verbose_name='节奏(BPM)')),
                ('tags', models.JSONField(blank=True, default=list, verbose_name='标签')),
                ('category', models.CharField(blank=True, max_length=50, verbose_name='分类')),
                ('artist', models.CharField(blank=True, max_length=255, verbose_name='艺术家')),
                ('description', models.TextField(blank=True, verbose_name='描述')),
                ('license_type', models.CharField(default='free', max_length=50, verbose_name='许可类型')),
                ('copyright_info', models.TextField(blank=True, verbose_name='版权信息')),
                ('usage_count', models.IntegerField(default=0, verbose_name='使用次数')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
            ],
            options={
                'verbose_name': '背景音乐',
                'verbose_name_plural': '背景音乐',
                'db_table': 'background_music',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Character',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, verbose_name='角色名称')),
                ('character_type', models.CharField(choices=[('protagonist', '主角'), ('antagonist', '反派'), ('supporting', '配角'), ('mentor', '导师'), ('sidekick', '伙伴')], max_length=50, verbose_name='角色类型')),
                ('age', models.IntegerField(blank=True, null=True, verbose_name='年龄')),
                ('gender', models.CharField(blank=True, max_length=20, verbose_name='性别')),
                ('species', models.CharField(default='人类', max_length=50, verbose_name='种族/物种')),
                ('personality', models.TextField(verbose_name='性格特征')),
                ('appearance', models.TextField(blank=True, verbose_name='外貌描述')),
                ('background', models.TextField(blank=True, verbose_name='背景故事')),
                ('abilities', models.JSONField(blank=True, default=list, verbose_name='能力特长')),
                ('weaknesses', models.JSONField(blank=True, default=list, verbose_name='弱点')),
                ('relationships', models.JSONField(blank=True, default=dict, verbose_name='人物关系')),
                ('tags', models.JSONField(blank=True, default=list, verbose_name='标签')),
                ('is_public', models.BooleanField(default=False, verbose_name='是否公开')),
                ('use_count', models.IntegerField(default=0, verbose_name='使用次数')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
            ],
            options={
                'verbose_name': '角色',
                'verbose_name_plural': '角色',
                'db_table': 'characters',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Story',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=200, verbose_name='故事标题')),
                ('topic', models.TextField(verbose_name='故事主题')),
                ('genre', models.CharField(max_length=50, verbose_name='题材')),
                ('age_group', models.CharField(max_length=50, verbose_name='年龄段')),
                ('style', models.CharField(max_length=50, verbose_name='风格')),
                ('word_count', models.IntegerField(verbose_name='目标字数')),
                ('custom_elements', models.JSONField(blank=True, default=dict, verbose_name='自定义元素')),
                ('content', models.TextField(blank=True, verbose_name='故事内容')),
                ('version', models.IntegerField(default=1, verbose_name='版本号')),
                ('quality_score', models.FloatField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='质量评分')),
                ('quality_report', models.JSONField(blank=True, default=dict, verbose_name='质量报告')),
                ('status', models.CharField(choices=[('draft', '草稿'), ('generating', '生成中'), ('completed', '已完成'), ('failed', '生成失败')], default='draft', max_length=20, verbose_name='状态')),
                ('actual_word_count', models.IntegerField(default=0, verbose_name='实际字数')),
                ('view_count', models.IntegerField(default=0, verbose_name='查看次数')),
                ('like_count', models.IntegerField(default=0, verbose_name='点赞次数')),
                ('exported_formats', models.JSONField(blank=True, default=list, verbose_name='已导出格式')),
                ('tags', models.JSONField(blank=True, default=list, verbose_name='标签')),
                ('category', models.CharField(blank=True, max_length=100, verbose_name='分类')),
                ('is_public', models.BooleanField(default=False, verbose_name='是否公开')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='完成时间')),
            ],
            options={
                'verbose_name': '故事',
                'verbose_name_plural': '故事',
                'db_table': 'stories',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='StoryExport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('format', models.CharField(choices=[('txt', '纯文本'), ('markdown', 'Markdown'), ('pdf', 'PDF'), ('docx', 'Word文档'), ('html', 'HTML'), ('epub', 'EPUB电子书')], max_length=20, verbose_name='导出格式')),
                ('options', models.JSONField(blank=True, default=dict, verbose_name='导出选项')),
                ('status', models.CharField(choices=[('pending', '等待中'), ('processing', '处理中'), ('completed', '已完成'), ('failed', '失败')], default='pending', max_length=20, verbose_name='状态')),
                ('file_path', models.CharField(blank=True, max_length=500, verbose_name='文件路径')),
                ('file_size', models.IntegerField(blank=True, null=True, verbose_name='文件大小(字节)')),
                ('error_message', models.TextField(blank=True, verbose_name='错误信息')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='完成时间')),
            ],
            options={
                'verbose_name': '故事导出',
                'verbose_name_plural': '故事导出',
                'db_table': 'story_exports',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='StoryFeedback',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('overall_rating', models.IntegerField(choices=[(1, '很差'), (2, '较差'), (3, '一般'), (4, '良好'), (5, '优秀')], verbose_name='总体评分')),
                ('plot_rating', models.IntegerField(blank=True, choices=[(1, '很差'), (2, '较差'), (3, '一般'), (4, '良好'), (5, '优秀')], null=True, verbose_name='情节评分')),
                ('language_rating', models.IntegerField(blank=True, choices=[(1, '很差'), (2, '较差'), (3, '一般'), (4, '良好'), (5, '优秀')], null=True, verbose_name='语言评分')),
                ('creativity_rating', models.IntegerField(blank=True, choices=[(1, '很差'), (2, '较差'), (3, '一般'), (4, '良好'), (5, '优秀')], null=True, verbose_name='创意评分')),
                ('comment', models.TextField(blank=True, verbose_name='评论')),
                ('suggestions', models.TextField(blank=True, verbose_name='改进建议')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '故事反馈',
                'verbose_name_plural': '故事反馈',
                'db_table': 'story_feedbacks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='StoryTemplate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=200, verbose_name='模板名称')),
                ('description', models.TextField(blank=True, verbose_name='模板描述')),
                ('genre', models.CharField(choices=[('fairy_tale', '童话故事'), ('adventure', '冒险故事'), ('sci_fi', '科幻故事'), ('fable', '寓言故事'), ('friendship', '友谊故事'), ('mystery', '悬疑推理')], max_length=50, verbose_name='题材')),
                ('age_group', models.CharField(choices=[('preschool', '学龄前儿童(3-6岁)'), ('elementary', '小学生(7-12岁)'), ('teenager', '青少年(13-18岁)'), ('adult', '成人(18岁以上)')], max_length=50, verbose_name='年龄段')),
                ('style', models.CharField(choices=[('warm_healing', '温馨治愈'), ('humorous', '幽默诙谐'), ('inspirational', '励志向上'), ('poetic', '诗意唯美'), ('suspenseful', '紧张悬疑')], max_length=50, verbose_name='风格')),
                ('min_word_count', models.IntegerField(default=500, validators=[django.core.validators.MinValueValidator(100)], verbose_name='最小字数')),
                ('max_word_count', models.IntegerField(default=1500, validators=[django.core.validators.MinValueValidator(100)], verbose_name='最大字数')),
                ('custom_elements', models.JSONField(blank=True, default=dict, verbose_name='自定义元素')),
                ('prompt_template', models.TextField(blank=True, verbose_name='提示词模板')),
                ('is_public', models.BooleanField(default=False, verbose_name='是否公开')),
                ('use_count', models.IntegerField(default=0, verbose_name='使用次数')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
            ],
            options={
                'verbose_name': '故事模板',
                'verbose_name_plural': '故事模板',
                'db_table': 'story_templates',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='TransitionEffect',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, verbose_name='效果名称')),
                ('effect_type', models.CharField(choices=[('fade', '淡入淡出'), ('dissolve', '溶解'), ('wipe', '擦除'), ('slide', '滑动'), ('zoom', '缩放'), ('rotate', '旋转'), ('blur', '模糊'), ('glitch', '故障')], max_length=20, verbose_name='效果类型')),
                ('ffmpeg_filter', models.TextField(verbose_name='FFmpeg滤镜')),
                ('duration', models.FloatField(default=0.5, verbose_name='持续时间(秒)')),
                ('preview_image', models.CharField(blank=True, max_length=512, verbose_name='预览图')),
                ('usage_count', models.IntegerField(default=0, verbose_name='使用次数')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '转场效果',
                'verbose_name_plural': '转场效果',
                'db_table': 'transition_effects',
                'ordering': ['-usage_count'],
            },
        ),
        migrations.CreateModel(
            name='Video',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=200, verbose_name='标题')),
                ('description', models.TextField(blank=True, verbose_name='描述')),
                ('generation_type', models.CharField(choices=[('text_to_video', '文本转视频'), ('image_to_video', '图片转视频'), ('storyboard_to_video', '故事板转视频'), ('story_to_video', '故事转视频')], max_length=50, verbose_name='生成类型')),
                ('prompt', models.TextField(blank=True, verbose_name='生成提示词')),
                ('video_url', models.URLField(blank=True, max_length=500, verbose_name='视频URL')),
                ('thumbnail_url', models.URLField(blank=True, max_length=500, verbose_name='缩略图URL')),
                ('duration', models.FloatField(default=0, verbose_name='时长（秒）')),
                ('resolution', models.CharField(default='1280x720', max_length=20, verbose_name='分辨率')),
                ('fps', models.IntegerField(default=24, verbose_name='帧率')),
                ('file_size', models.BigIntegerField(default=0, verbose_name='文件大小（字节）')),
                ('status', models.CharField(choices=[('pending', '等待中'), ('processing', '处理中'), ('completed', '已完成'), ('failed', '失败')], default='pending', max_length=20, verbose_name='状态')),
                ('error_message', models.TextField(blank=True, verbose_name='错误信息')),
                ('generation_config', models.JSONField(blank=True, default=dict, verbose_name='生成配置')),
                ('view_count', models.IntegerField(default=0, verbose_name='观看次数')),
                ('like_count', models.IntegerField(default=0, verbose_name='点赞数')),
                ('share_count', models.IntegerField(default=0, verbose_name='分享次数')),
                ('tags', models.JSONField(blank=True, default=list, verbose_name='标签')),
                ('category', models.CharField(blank=True, max_length=50, verbose_name='分类')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='完成时间')),
            ],
            options={
                'verbose_name': '视频',
                'verbose_name_plural': '视频',
                'db_table': 'videos',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='VideoExport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('format', models.CharField(choices=[('mp4', 'MP4'), ('mov', 'MOV'), ('avi', 'AVI'), ('webm', 'WebM'), ('gif', 'GIF')], max_length=20, verbose_name='格式')),
                ('resolution', models.CharField(blank=True, max_length=20, verbose_name='分辨率')),
                ('quality', models.CharField(default='high', max_length=20, verbose_name='质量')),
                ('include_subtitles', models.BooleanField(default=False, verbose_name='包含字幕')),
                ('include_watermark', models.BooleanField(default=False, verbose_name='包含水印')),
                ('status', models.CharField(choices=[('pending', '等待中'), ('processing', '处理中'), ('completed', '已完成'), ('failed', '失败')], default='pending', max_length=20, verbose_name='状态')),
                ('file_url', models.URLField(blank=True, max_length=500, verbose_name='文件URL')),
                ('file_size', models.BigIntegerField(default=0, verbose_name='文件大小')),
                ('error_message', models.TextField(blank=True, verbose_name='错误信息')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='完成时间')),
            ],
            options={
                'verbose_name': '视频导出',
                'verbose_name_plural': '视频导出',
                'db_table': 'video_exports',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='VideoFilter',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, verbose_name='滤镜名称')),
                ('category', models.CharField(choices=[('color', '色彩调整'), ('style', '风格化'), ('vintage', '复古'), ('cinematic', '电影感'), ('artistic', '艺术效果')], max_length=20, verbose_name='分类')),
                ('ffmpeg_filter', models.TextField(verbose_name='FFmpeg滤镜')),
                ('preview_image', models.CharField(blank=True, max_length=512, verbose_name='预览图')),
                ('usage_count', models.IntegerField(default=0, verbose_name='使用次数')),
                ('is_active', models.BooleanField(default=True, verbose_name='是否启用')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '视频滤镜',
                'verbose_name_plural': '视频滤镜',
                'db_table': 'video_filters',
                'ordering': ['-usage_count'],
            },
        ),
        migrations.CreateModel(
            name='VideoScene',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('scene_number', models.IntegerField(verbose_name='场景序号')),
                ('image_url', models.URLField(blank=True, max_length=500, verbose_name='场景图片')),
                ('video_clip_url', models.URLField(blank=True, max_length=500, verbose_name='场景视频片段')),
                ('narration', models.TextField(blank=True, verbose_name='旁白')),
                ('dialogue', models.TextField(blank=True, verbose_name='对话')),
                ('motion_prompt', models.TextField(blank=True, verbose_name='运动描述')),
                ('transition', models.CharField(default='fade', max_length=50, verbose_name='转场效果')),
                ('duration', models.FloatField(default=4.0, verbose_name='时长（秒）')),
                ('start_time', models.FloatField(default=0, verbose_name='开始时间')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '视频场景',
                'verbose_name_plural': '视频场景',
                'db_table': 'video_scenes',
                'ordering': ['scene_number'],
            },
        ),
        migrations.CreateModel(
            name='VideoTemplate',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, verbose_name='模板名称')),
                ('description', models.TextField(blank=True, verbose_name='描述')),
                ('category', models.CharField(blank=True, max_length=50, verbose_name='分类')),
                ('template_config', models.JSONField(default=dict, verbose_name='模板配置')),
                ('preview_url', models.URLField(blank=True, max_length=500, verbose_name='预览URL')),
                ('thumbnail_url', models.URLField(blank=True, max_length=500, verbose_name='缩略图')),
                ('use_count', models.IntegerField(default=0, verbose_name='使用次数')),
                ('is_public', models.BooleanField(default=False, verbose_name='是否公开')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
            ],
            options={
                'verbose_name': '视频模板',
                'verbose_name_plural': '视频模板',
                'db_table': 'video_templates',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='cameramovement',
            name='created_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_camera_movements', to=settings.AUTH_USER_MODEL, verbose_name='创建人'),
        ),
        migrations.AddField(
            model_name='cameramovement',
            name='is_deleted',
            field=models.BooleanField(db_index=True, default=False, verbose_name='是否删除'),
        ),
        migrations.AddField(
            model_name='cameramovement',
            name='updated_at',
            field=models.DateTimeField(auto_now=True, verbose_name='更新时间'),
        ),
        migrations.AddField(
            model_name='contentrewrite',
            name='created_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_content_rewrites', to=settings.AUTH_USER_MODEL, verbose_name='创建人'),
        ),
        migrations.AddField(
            model_name='contentrewrite',
            name='is_deleted',
            field=models.BooleanField(db_index=True, default=False, verbose_name='是否删除'),
        ),
        migrations.AddField(
            model_name='contentrewrite',
            name='updated_at',
            field=models.DateTimeField(auto_now=True, verbose_name='更新时间'),
        ),
        migrations.AddField(
            model_name='generatedimage',
            name='created_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_images', to=settings.AUTH_USER_MODEL, verbose_name='创建人'),
        ),
        migrations.AddField(
            model_name='generatedimage',
            name='error_message',
            field=models.TextField(blank=True, default='', verbose_name='错误信息'),
        ),
        migrations.AddField(
            model_name='generatedimage',
            name='is_deleted',
            field=models.BooleanField(db_index=True, default=False, verbose_name='是否删除'),
        ),
        migrations.AddField(
            model_name='generatedvideo',
            name='created_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_videos', to=settings.AUTH_USER_MODEL, verbose_name='创建人'),
        ),
        migrations.AddField(
            model_name='generatedvideo',
            name='error_message',
            field=models.TextField(blank=True, default='', verbose_name='错误信息'),
        ),
        migrations.AddField(
            model_name='generatedvideo',
            name='is_deleted',
            field=models.BooleanField(db_index=True, default=False, verbose_name='是否删除'),
        ),
        migrations.AlterField(
            model_name='cameramovement',
            name='model_provider',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='models.modelprovider', verbose_name='使用的模型'),
        ),
        migrations.AlterField(
            model_name='cameramovement',
            name='prompt_used',
            field=models.TextField(blank=True, default='', verbose_name='使用的提示词'),
        ),
        migrations.AlterField(
            model_name='cameramovement',
            name='storyboard',
            field=models.OneToOneField(on_delete=django.db.models.deletion.PROTECT, related_name='camera_movement', to='content.storyboard', verbose_name='分镜'),
        ),
        migrations.AlterField(
            model_name='contentrewrite',
            name='model_provider',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='models.modelprovider', verbose_name='使用的模型'),
        ),
        migrations.AlterField(
            model_name='contentrewrite',
            name='project',
            field=models.OneToOneField(on_delete=django.db.models.deletion.PROTECT, related_name='content_rewrite', to='projects.project', verbose_name='项目'),
        ),
        migrations.AlterField(
            model_name='contentrewrite',
            name='prompt_used',
            field=models.TextField(blank=True, default='', verbose_name='使用的提示词'),
        ),
        migrations.AlterField(
            model_name='contentrewrite',
            name='rewritten_text',
            field=models.TextField(blank=True, default='', verbose_name='改写后文本'),
        ),
        migrations.AlterField(
            model_name='generatedimage',
            name='image_url',
            field=models.URLField(blank=True, default='', max_length=1024, verbose_name='图片URL'),
        ),
        migrations.AlterField(
            model_name='generatedimage',
            name='model_provider',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='models.modelprovider', verbose_name='使用的模型'),
        ),
        migrations.AlterField(
            model_name='generatedimage',
            name='storyboard',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='images', to='content.storyboard', verbose_name='分镜'),
        ),
        migrations.AlterField(
            model_name='generatedimage',
            name='thumbnail_url',
            field=models.URLField(blank=True, default='', max_length=1024, verbose_name='缩略图URL'),
        ),
        migrations.AlterField(
            model_name='generatedvideo',
            name='camera_movement',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='content.cameramovement', verbose_name='运镜'),
        ),
        migrations.AlterField(
            model_name='generatedvideo',
            name='image',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='content.generatedimage', verbose_name='源图片'),
        ),
        migrations.AlterField(
            model_name='generatedvideo',
            name='model_provider',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='models.modelprovider', verbose_name='使用的模型'),
        ),
        migrations.AlterField(
            model_name='generatedvideo',
            name='storyboard',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='videos', to='content.storyboard', verbose_name='分镜'),
        ),
        migrations.AlterField(
            model_name='generatedvideo',
            name='thumbnail_url',
            field=models.URLField(blank=True, default='', max_length=1024, verbose_name='缩略图URL'),
        ),
        migrations.AlterField(
            model_name='generatedvideo',
            name='video_url',
            field=models.URLField(blank=True, default='', max_length=1024, verbose_name='视频URL'),
        ),
        migrations.AddIndex(
            model_name='cameramovement',
            index=models.Index(fields=['movement_type'], name='camera_move_movemen_fa1708_idx'),
        ),
        migrations.AddIndex(
            model_name='cameramovement',
            index=models.Index(fields=['model_provider'], name='camera_move_model_p_29305e_idx'),
        ),
        migrations.AddIndex(
            model_name='cameramovement',
            index=models.Index(fields=['storyboard'], name='camera_move_storybo_a9d4ee_idx'),
        ),
        migrations.AddIndex(
            model_name='cameramovement',
            index=models.Index(fields=['is_deleted', '-created_at'], name='camera_move_is_dele_8c12c2_idx'),
        ),
        migrations.AddIndex(
            model_name='contentrewrite',
            index=models.Index(fields=['model_provider'], name='content_rew_model_p_ef981f_idx'),
        ),
        migrations.AddIndex(
            model_name='contentrewrite',
            index=models.Index(fields=['is_deleted', '-created_at'], name='content_rew_is_dele_0a5461_idx'),
        ),
        migrations.AddIndex(
            model_name='generatedimage',
            index=models.Index(fields=['status', '-created_at'], name='generated_i_status_011424_idx'),
        ),
        migrations.AddIndex(
            model_name='generatedimage',
            index=models.Index(fields=['model_provider'], name='generated_i_model_p_c8cc39_idx'),
        ),
        migrations.AddIndex(
            model_name='generatedimage',
            index=models.Index(fields=['is_deleted', '-created_at'], name='generated_i_is_dele_257233_idx'),
        ),
        migrations.AddIndex(
            model_name='generatedvideo',
            index=models.Index(fields=['status', '-created_at'], name='generated_v_status_059baa_idx'),
        ),
        migrations.AddIndex(
            model_name='generatedvideo',
            index=models.Index(fields=['model_provider'], name='generated_v_model_p_d4182e_idx'),
        ),
        migrations.AddIndex(
            model_name='generatedvideo',
            index=models.Index(fields=['is_deleted', '-created_at'], name='generated_v_is_dele_b32ac4_idx'),
        ),
        migrations.AddField(
            model_name='videotemplate',
            name='user',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='video_templates', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='videoscene',
            name='video',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='scenes', to='content.video'),
        ),
        migrations.AddField(
            model_name='videoexport',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='videoexport',
            name='video',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exports', to='content.video'),
        ),
        migrations.AddField(
            model_name='video',
            name='story',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='videos', to='content.story', verbose_name='关联故事'),
        ),
        migrations.AddField(
            model_name='video',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='videos', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='storytemplate',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='story_templates', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='storyfeedback',
            name='story',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feedbacks', to='content.story'),
        ),
        migrations.AddField(
            model_name='storyfeedback',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='story_feedbacks', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='storyexport',
            name='story',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exports', to='content.story'),
        ),
        migrations.AddField(
            model_name='storyexport',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='story_exports', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='story',
            name='characters',
            field=models.ManyToManyField(blank=True, related_name='stories', to='content.Character', verbose_name='涉及的角色'),
        ),
        migrations.AddField(
            model_name='story',
            name='parent_story',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='revisions', to='content.story', verbose_name='父版本'),
        ),
        migrations.AddField(
            model_name='story',
            name='template',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='stories', to='content.storytemplate', verbose_name='使用的模板'),
        ),
        migrations.AddField(
            model_name='story',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stories', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='character',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='characters', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddIndex(
            model_name='backgroundmusic',
            index=models.Index(fields=['mood', 'is_active'], name='background__mood_367f11_idx'),
        ),
        migrations.AddIndex(
            model_name='backgroundmusic',
            index=models.Index(fields=['duration', 'mood'], name='background__duratio_7ec74c_idx'),
        ),
        migrations.AddIndex(
            model_name='backgroundmusic',
            index=models.Index(fields=['-usage_count'], name='background__usage_c_16b3dc_idx'),
        ),
        migrations.AddIndex(
            model_name='video',
            index=models.Index(fields=['user', '-created_at'], name='videos_user_id_5f9058_idx'),
        ),
        migrations.AddIndex(
            model_name='video',
            index=models.Index(fields=['status', '-created_at'], name='videos_status_3f96a7_idx'),
        ),
        migrations.AddIndex(
            model_name='video',
            index=models.Index(fields=['generation_type'], name='videos_generat_faf8cf_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='storyfeedback',
            unique_together={('story', 'user')},
        ),
        migrations.AddIndex(
            model_name='story',
            index=models.Index(fields=['user', 'status'], name='stories_user_id_cdc756_idx'),
        ),
        migrations.AddIndex(
            model_name='story',
            index=models.Index(fields=['genre', 'age_group'], name='stories_genre_efce5b_idx'),
        ),
        migrations.AddIndex(
            model_name='story',
            index=models.Index(fields=['-created_at'], name='stories_created_caa2ae_idx'),
        ),
    ]
